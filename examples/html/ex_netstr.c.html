<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>c2html for: ex_netstr.c</title>
    <link rel="stylesheet" type="text/css" href="f_c.css">
  </head>
  <body>
     <h1>ex_netstr.c</h1>
<pre class="c2html">
#<span class="cppdefine">define</span> VSTR_COMPILE_INCLUDE 1
#<span class="cppinclude">include</span> &lt;vstr.h&gt;

<span class="int">int</span> main(<span class="int">int</span> argc, <span class="char">char</span> *argv[])
{
	Vstr_base *s1 = <span class="null">NULL</span>;
	unsigned <span class="int">int</span> scan = 1;
	unsigned <span class="int">int</span> ns_tot = <span class="num0">0</span>;

	if (!vstr_init()) abort();

	if (!(s1 = vstr_make_base(<span class="null">NULL</span>))) abort();

	ns_tot = vstr_add_netstr_beg(s1, s1-&gt;len);
	while (scan &lt; (<span class="unsigned">unsigned</span>)argc)
	{
		unsigned <span class="int">int</span> ns = vstr_add_netstr_beg(s1, s1-&gt;len);
		vstr_add_cstr_ptr(s1, s1-&gt;len, argv[scan]);
		vstr_add_netstr_end(s1, ns, s1-&gt;len);

		++scan;
	}
	vstr_add_netstr_end(s1, ns_tot, s1-&gt;len);
	vstr_add_cstr_ptr(s1, s1-&gt;len, <span class="str">"\n"</span>);


	if (s1-&gt;conf-&gt;malloc_bad)
		exit (<span class="exitfail">EXIT_FAILURE</span>);

	while (s1-&gt;len &amp;&amp; vstr_sc_write_fd(s1, 1, s1-&gt;len, 1, <span class="null">NULL</span>))
	{ <span class="comment">/* nothing */</span> }

	vstr_exit();

	exit (<span class="exitsucs">EXIT_SUCCESS</span>);
}

</pre>
<!-- C to html convertion of ex_netstr.c -->
<!--   done on Thu May 13 04:41:06 2004 -->
<!--   done by ex_highlight -->

  </body>
</html>
